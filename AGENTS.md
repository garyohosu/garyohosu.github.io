# AGENTS.md - ブログ記事作成ルール

このファイルはAIエージェントがブログ記事を作成する際のルールと過去の問題から学んだ教訓を記載します。

---

## 過去のインシデント記録

### 2026-01-26: URLスラッグ衝突問題

**発生した問題**:
- `2026-01-20-ai-trends-2026.md` と `2026-01-26-ai-trends-2026.md` を作成
- 両方のファイルが同じURLスラッグ `/posts/ai-trends-2026/` を生成
- 1/26の記事をクリックしても1/20の記事が表示される不具合が発生

**原因**:
- Jekyllは `YYYY-MM-DD-slug.md` のファイル名から `/posts/slug/` というURLを生成する
- 日付部分はURLに含まれないため、`slug` 部分が同じだと衝突する

**解決方法**:
- 1/26の記事を `2026-01-26-ai-trends-january-week4.md` にリネーム
- URLが `/posts/ai-trends-january-week4/` に変更され衝突が解消

---

## 記事作成時の必須チェックリスト

### 1. ファイル名の一意性確認（最重要）

**新規記事を作成する前に、必ず以下のコマンドで既存のファイル名を確認すること**:

```bash
# 類似のファイル名がないか確認
ls _posts/ | grep -i "<キーワード>"

# 例: ai-trends関連の記事を確認
ls _posts/ | grep -i "ai-trends"
```

### 2. ファイル命名規則

| パターン | 良い例 | 悪い例 |
|---------|--------|--------|
| 週次記事 | `2026-01-26-ai-trends-week4.md` | `2026-01-26-ai-trends-2026.md` |
| 月次記事 | `2026-01-ai-trends-january.md` | `2026-01-ai-trends.md` |
| 特定トピック | `2026-01-26-deepseek-v4-release.md` | `2026-01-26-ai-news.md` |

### 3. 推奨ファイル名フォーマット

```
YYYY-MM-DD-<トピック>-<識別子>.md
```

**識別子の例**:
- 週番号: `week1`, `week2`, `week3`, `week4`
- 月名: `january`, `february`, etc.
- バージョン: `v1`, `v2`
- 特定日: `jan26`, `0126`

### 4. 同一テーマの連続記事

同じテーマで複数の記事を作成する場合:

```
# AIトレンド記事の場合
2026-01-13-ai-trends-week2.md
2026-01-20-ai-trends-week3.md
2026-01-26-ai-trends-week4.md

# または月名を使用
2026-01-20-ai-trends-january-late.md
2026-01-26-ai-trends-january-final.md
```

---

## ainews.md 実行時のワークフロー

1. **既存記事の確認**
   ```bash
   ls _posts/ | grep -i "ai-trends\|ai-news"
   ```

2. **一意のファイル名を決定**
   - 今日の日付と週番号を確認
   - 既存のファイル名と衝突しないことを確認

3. **記事を作成**

4. **プッシュ前の最終確認**
   - ファイル名が一意であることを再確認
   - `git status` で変更内容を確認

5. **プッシュ後の動作確認**
   - サイトにアクセスして記事が正しく表示されることを確認
   - 新しい記事のリンクをクリックして正しいページに遷移することを確認

---

## トラブルシューティング

### 記事が表示されない/間違った記事が表示される

1. URLスラッグの衝突を疑う
2. `_posts/` 内で類似のファイル名を検索
3. 衝突があればファイル名をリネーム
4. 再度プッシュしてGitHub Pagesのビルドを待つ
5. ブラウザのキャッシュをクリア（Ctrl+Shift+R）して確認

---

## 更新履歴

- 2026-01-26: 初版作成（URLスラッグ衝突問題の再発防止策）
